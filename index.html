<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TARS E-Ink Display</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=IBM+Plex+Mono:wght@400;500;600&family=Literata:opsz,wght@7..72,400;7..72,600;7..72,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/eink.css">
</head>
<body>
    <!-- E-ink Screen Frame -->
    <div class="eink-frame">
        <!-- Paper Texture Overlay -->
        <div class="paper-texture"></div>
        <div class="paper-grain"></div>

        <!-- E-ink Refresh Flash Overlay -->
        <div class="ink-flash-overlay" id="ink-flash"></div>

        <!-- Screen Bezel -->
        <div class="bezel">
            <div class="bezel-top">
                <span class="bezel-brand">TARS</span>
                <span class="bezel-model">E-INK DISPLAY // MK-IV</span>
                <div class="power-led" id="power-led"></div>
            </div>

            <!-- Main Display Area -->
            <div class="display-area">

                <!-- Password Overlay -->
                <div class="password-overlay" id="password-overlay">
                    <div class="lock-screen">
                        <div class="lock-icon">
                            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="8" y="20" width="32" height="24" rx="2" stroke="currentColor" stroke-width="2"/>
                                <path d="M16 20V12C16 7.58172 19.5817 4 24 4C28.4183 4 32 7.58172 32 12V20" stroke="currentColor" stroke-width="2"/>
                                <circle cx="24" cy="32" r="3" fill="currentColor"/>
                            </svg>
                        </div>
                        <h1>Display Locked</h1>
                        <p class="subtitle">Enter access code to continue</p>
                        <input type="password" class="password-input" id="password-input" placeholder="••••••••••" maxlength="12">
                        <button class="btn btn-primary" onclick="verifyPassword()">UNLOCK</button>
                        <div class="error-msg" id="error-msg"></div>
                        <div class="device-info">
                            <span>FW: v2.1.0-eink</span>
                            <span>SN: TARS-2026-0131</span>
                        </div>
                    </div>
                </div>

                <!-- Main Dashboard -->
                <div class="dashboard" id="dashboard" style="display: none;">

                    <!-- Header -->
                    <header class="dashboard-header">
                        <div class="brand">
                            <div class="logo-eink">
                                <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="4" y="4" width="32" height="32" rx="4" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="14" cy="16" r="3" fill="currentColor"/>
                                    <circle cx="26" cy="16" r="3" fill="currentColor"/>
                                    <path d="M12 26C12 26 16 30 20 30C24 30 28 26 28 26" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <line x1="20" y1="4" x2="20" y2="2" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="20" cy="2" r="1.5" fill="currentColor"/>
                                </svg>
                            </div>
                            <div class="brand-text">
                                <h1>TARS</h1>
                                <span class="tagline">Neural Command</span>
                            </div>
                        </div>
                        <div class="status-bar">
                            <div class="battery-indicator">
                                <span class="bat-icon">▮▮▮▮</span>
                                <span class="bat-level">87%</span>
                            </div>
                            <div class="connection-dot" id="conn-dot" title="Connected"></div>
                            <span class="clock" id="current-time">--:--</span>
                        </div>
                    </header>

                    <!-- Hero: Neural Core -->
                    <section class="hero-eink">
                        <div class="core-display">
                            <div class="core-label">NEURAL MEMORIES</div>
                            <div class="core-value" id="memories">
                                <span class="digit-group" data-value="0">0</span>
                                <span class="digit-group" data-value="0">0</span>
                                <span class="digit-group" data-value="0">0</span>
                            </div>
                            <div class="core-sublabel">stored vectors in ChromaDB</div>
                        </div>
                        <div class="core-stats">
                            <div class="cstat">
                                <span class="cstat-val" id="uptime">--</span>
                                <span class="cstat-label">Days Active</span>
                            </div>
                            <div class="cstat">
                                <span class="cstat-val" id="skills">--</span>
                                <span class="cstat-label">Skills</span>
                            </div>
                            <div class="cstat">
                                <span class="cstat-val" id="deployments">--</span>
                                <span class="cstat-label">Deployments</span>
                            </div>
                        </div>
                    </section>

                    <!-- Metrics Strip -->
                    <section class="metrics-eink">
                        <div class="metric-eink" data-metric="tasks">
                            <div class="me-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <path d="M9 12l2 2 4-4"/>
                                </svg>
                            </div>
                            <div class="me-data">
                                <span class="me-value" id="tasks">--</span>
                                <span class="me-label">Active Tasks</span>
                            </div>
                        </div>
                        <div class="metric-eink" data-metric="emails-in">
                            <div class="me-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                            </div>
                            <div class="me-data">
                                <span class="me-value" id="emails-in">--</span>
                                <span class="me-label">Inbox</span>
                            </div>
                        </div>
                        <div class="metric-eink" data-metric="emails-out">
                            <div class="me-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"/>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                                </svg>
                            </div>
                            <div class="me-data">
                                <span class="me-value" id="emails-out">--</span>
                                <span class="me-label">Sent</span>
                            </div>
                        </div>
                        <div class="metric-eink" data-metric="subdomains">
                            <div class="me-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="2" y1="12" x2="22" y2="12"/>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                                </svg>
                            </div>
                            <div class="me-data">
                                <span class="me-value" id="subdomains">--</span>
                                <span class="me-label">Domains</span>
                            </div>
                        </div>
                    </section>

                    <!-- System Status Matrix -->
                    <section class="system-eink">
                        <h2 class="section-title-eink">
                            <span class="sti-icon">◈</span>
                            SYSTEM STATUS
                        </h2>
                        <div class="status-matrix" id="system-status">
                            <!-- Dynamically populated -->
                        </div>
                    </section>

                    <!-- Live Operations -->
                    <section class="ops-eink">
                        <h2 class="section-title-eink">
                            <span class="sti-icon">⟳</span>
                            LIVE OPERATIONS
                        </h2>
                        <div class="ops-grid-eink">
                            <div class="ops-card-eink">
                                <h3>Active Jobs</h3>
                                <div class="ops-list" id="active-jobs">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>
                            <div class="ops-card-eink">
                                <h3>System Log</h3>
                                <div class="ops-list log-list" id="recent-logs">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>
                            <div class="ops-card-eink">
                                <h3>Recent Memories</h3>
                                <div class="ops-list mem-list" id="recent-memories">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>
                            <div class="ops-card-eink">
                                <h3>Resources</h3>
                                <div class="ops-list res-list" id="system-resources">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Integration Panel -->
                    <section class="integration-eink">
                        <h2 class="section-title-eink">
                            <span class="sti-icon">◆</span>
                            INTEGRATIONS
                        </h2>
                        <div class="int-grid" id="integration-status">
                            <!-- Dynamically populated -->
                        </div>
                    </section>

                    <!-- Command History -->
                    <section class="commands-eink">
                        <h2 class="section-title-eink">
                            <span class="sti-icon">▶</span>
                            COMMAND HISTORY
                        </h2>
                        <div class="cmd-list" id="recent-commands">
                            <!-- Dynamically populated -->
                        </div>
                    </section>

                    <!-- Activity Stream -->
                    <section class="activity-eink">
                        <h2 class="section-title-eink">
                            <span class="sti-icon">◈</span>
                            ACTIVITY STREAM
                        </h2>
                        <div class="act-list" id="activity">
                            <!-- Dynamically populated -->
                        </div>
                    </section>

                    <!-- Latest Deployment -->
                    <section class="deploy-eink">
                        <h2 class="section-title-eink">
                            <span class="sti-icon">▲</span>
                            LATEST DEPLOYMENT
                        </h2>
                        <div class="deploy-card-eink">
                            <div class="deploy-info-eink">
                                <span class="deploy-name" id="last-deploy-name">--</span>
                                <span class="deploy-meta" id="last-deploy-meta">--</span>
                            </div>
                            <span class="deploy-time" id="last-deploy-time">--</span>
                        </div>
                    </section>

                    <!-- Footer / Control Bar -->
                    <footer class="footer-eink">
                        <div class="footer-left">
                            <span class="fw-version">Firmware v2.1.0-eink</span>
                            <span class="refresh-indicator" id="refresh-indicator">
                                <span class="ri-dot"></span>
                                <span id="last-sync">Sync: Never</span>
                            </span>
                        </div>
                        <div class="footer-center">
                            <span class="ink-logo">e•ink</span>
                        </div>
                        <div class="footer-right">
                            <button class="btn-eink" id="refresh-btn" onclick="manualRefresh()">
                                <svg class="refresh-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23 4 23 10 17 10"/>
                                    <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                                </svg>
                                REFRESH
                            </button>
                        </div>
                    </footer>

                </div><!-- /dashboard -->

            </div><!-- /display-area -->

            <!-- Bezel Bottom -->
            <div class="bezel-bottom">
                <span class="bezel-left">DISPLAY PORT: ACTIVE</span>
                <span class="bezel-center">TARS COMMAND SYSTEM</span>
                <span class="bezel-right" id="page-number">PAGE 1 OF 1</span>
            </div>
        </div><!-- /bezel -->
    </div><!-- /eink-frame -->

    <!-- Refresh Sound (optional, muted by default) -->
    <audio id="refresh-sound" preload="auto" muted>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbqWEpKj+ozNqLUEhIgZ" type="audio/wav">
    </audio>

    <script src="js/dashboard.js"></script>
</body>
</html>
